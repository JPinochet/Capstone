<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_18) on Mon Apr 12 09:28:19 MDT 2010 -->
<TITLE>
FacilityBroker
</TITLE>

<META NAME="date" CONTENT="2010-04-12">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="FacilityBroker";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/FacilityBroker.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../persistence/EmployeeBroker.html" title="class in persistence"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../persistence/InvoiceBroker.html" title="class in persistence"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?persistence/FacilityBroker.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="FacilityBroker.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
persistence</FONT>
<BR>
Class FacilityBroker</H2>
<PRE>
java.lang.Object
  <IMG SRC="../resources/inherit.gif" ALT="extended by "><B>persistence.FacilityBroker</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>FacilityBroker</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>cantley c</DD>
</DL>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../persistence/FacilityBroker.html#close()">close</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Closes Database connection using the singleton method</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../persistence/FacilityBroker.html" title="class in persistence">FacilityBroker</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../persistence/FacilityBroker.html#getBroker()">getBroker</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the broker instance</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../problemDomain/Facility.html" title="class in problemDomain">Facility</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../persistence/FacilityBroker.html#getFacilityInformation(int)">getFacilityInformation</A></B>(int&nbsp;id)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method retrieves the facility details using the id of the facility.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;<A HREF="../problemDomain/Facility.html" title="class in problemDomain">Facility</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../persistence/FacilityBroker.html#getFacilityList()">getFacilityList</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The method retrieves all the facility objects stored in the database.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../persistence/FacilityBroker.html#persist(java.lang.Object)">persist</A></B>(java.lang.Object&nbsp;o)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the id for facility exists facility is updated with new values
 If the id does not exist information is inserted into facility table
 
 The method first casts the object being passed it as a facility, afterwards it checks if the id of the
 facility is 0 or an actual number.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../persistence/FacilityBroker.html#remove(java.lang.Object)">remove</A></B>(java.lang.Object&nbsp;o)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Deletes information from rate table where facility_id = facility.getId
 If id does not exist a exception will be thrown.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;<A HREF="../problemDomain/Facility.html" title="class in problemDomain">Facility</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../persistence/FacilityBroker.html#search(java.lang.String)">search</A></B>(java.lang.String&nbsp;searchText)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Searches for facilities containing some form of the search string passed to the method.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="persist(java.lang.Object)"><!-- --></A><H3>
persist</H3>
<PRE>
public boolean <B>persist</B>(java.lang.Object&nbsp;o)
                throws <A HREF="../exceptions/DatabaseConnectionException.html" title="class in exceptions">DatabaseConnectionException</A></PRE>
<DL>
<DD>If the id for facility exists facility is updated with new values
 If the id does not exist information is inserted into facility table
 
 The method first casts the object being passed it as a facility, afterwards it checks if the id of the
 facility is 0 or an actual number. If the id is a number then the method opens a connection with the 
 mysql database and performs an update on the facility page. Afterwards the rates are updated for the
 facility. This is done by opening a connection with the database and deleting all the data from the facility_rates
 where the facility_id is the same. Afterwards the method inserts all the new facility/rate association into the 
 table to associate the charges related to facility.
 
 If the id is 0 than the system performs an insert instead of an update into the facility table.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true/false if the object is valid.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../exceptions/DatabaseConnectionException.html" title="class in exceptions">DatabaseConnectionException</A></CODE> - - is thrown if DB connection fails</DL>
</DD>
</DL>
<HR>

<A NAME="remove(java.lang.Object)"><!-- --></A><H3>
remove</H3>
<PRE>
public boolean <B>remove</B>(java.lang.Object&nbsp;o)
               throws <A HREF="../exceptions/DatabaseConnectionException.html" title="class in exceptions">DatabaseConnectionException</A></PRE>
<DL>
<DD>Deletes information from rate table where facility_id = facility.getId
 If id does not exist a exception will be thrown.
 
 This method opens a database connection to the mysql database and deletes all 
 facilities with the same id's as the object passed in.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true/false if the object is valid.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../exceptions/DatabaseConnectionException.html" title="class in exceptions">DatabaseConnectionException</A></CODE> - is thrown if DB connection fails</DL>
</DD>
</DL>
<HR>

<A NAME="close()"><!-- --></A><H3>
close</H3>
<PRE>
public void <B>close</B>()</PRE>
<DL>
<DD>Closes Database connection using the singleton method
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getBroker()"><!-- --></A><H3>
getBroker</H3>
<PRE>
public static <A HREF="../persistence/FacilityBroker.html" title="class in persistence">FacilityBroker</A> <B>getBroker</B>()
                                throws <A HREF="../exceptions/DatabaseConnectionException.html" title="class in exceptions">DatabaseConnectionException</A></PRE>
<DL>
<DD>Gets the broker instance
<P>
<DD><DL>

<DT><B>Returns:</B><DD>The current broker instance
<DT><B>Throws:</B>
<DD><CODE><A HREF="../exceptions/DatabaseConnectionException.html" title="class in exceptions">DatabaseConnectionException</A></CODE> - is thrown if DB connection fails</DL>
</DD>
</DL>
<HR>

<A NAME="getFacilityInformation(int)"><!-- --></A><H3>
getFacilityInformation</H3>
<PRE>
public <A HREF="../problemDomain/Facility.html" title="class in problemDomain">Facility</A> <B>getFacilityInformation</B>(int&nbsp;id)
                                throws <A HREF="../exceptions/DatabaseConnectionException.html" title="class in exceptions">DatabaseConnectionException</A></PRE>
<DL>
<DD>This method retrieves the facility details using the id of the facility.
 
 The method open a connection with the mysql database and queries the database 
 for the facility information based on the facility id. 
 
 The method queries the rates and additional charges related to the facility and afterwards finds 
 the remaining information from the facility table.
 
 From the results the method constructs a facility object and returns it.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>id</CODE> - is the id for the facility
<DT><B>Returns:</B><DD>the resultSet for requested facility
<DT><B>Throws:</B>
<DD><CODE><A HREF="../exceptions/DatabaseConnectionException.html" title="class in exceptions">DatabaseConnectionException</A></CODE> - is thrown if DB connection fails</DL>
</DD>
</DL>
<HR>

<A NAME="getFacilityList()"><!-- --></A><H3>
getFacilityList</H3>
<PRE>
public java.util.List&lt;<A HREF="../problemDomain/Facility.html" title="class in problemDomain">Facility</A>&gt; <B>getFacilityList</B>()
                                         throws <A HREF="../exceptions/DatabaseConnectionException.html" title="class in exceptions">DatabaseConnectionException</A></PRE>
<DL>
<DD>The method retrieves all the facility objects stored in the database.
 
 The method creates an ArrayList of facilities. 
 
 The method open a connection with the mysql database and queries the database 
 for the facility information. 
 
 
 For every facility found in the database the following takes place:
                The method queries the rates and additional charges related to the facility and afterwards finds 
                the remaining information from the facility table.
 
 From the results the method constructs a facility object and adds it to the facilities ArrayList.
 
 The method returns the facilities ArrayList.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>updated result set, returns facilities
<DT><B>Throws:</B>
<DD><CODE><A HREF="../exceptions/DatabaseConnectionException.html" title="class in exceptions">DatabaseConnectionException</A></CODE> - is thrown if DB connection fails</DL>
</DD>
</DL>
<HR>

<A NAME="search(java.lang.String)"><!-- --></A><H3>
search</H3>
<PRE>
public java.util.List&lt;<A HREF="../problemDomain/Facility.html" title="class in problemDomain">Facility</A>&gt; <B>search</B>(java.lang.String&nbsp;searchText)
                                throws <A HREF="../exceptions/DatabaseConnectionException.html" title="class in exceptions">DatabaseConnectionException</A></PRE>
<DL>
<DD>Searches for facilities containing some form of the search string passed to the method.
 
 A database connection is created with the mysql database. Afterwards it is queried for 
 all facilities with a name that is similar to the name of the facilities in the database.
 The ResultSet received is then looped through afterwards and the results are created into
 generic facility object, meaning they do not contain any rates or additional charges. 
 They are than added to an ArrayList of facilities which is returned later on.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>information requested in a list format
<DT><B>Throws:</B>
<DD><CODE><A HREF="../exceptions/DatabaseConnectionException.html" title="class in exceptions">DatabaseConnectionException</A></CODE> - is thrown if DB connection fails</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/FacilityBroker.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../persistence/EmployeeBroker.html" title="class in persistence"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../persistence/InvoiceBroker.html" title="class in persistence"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?persistence/FacilityBroker.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="FacilityBroker.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
